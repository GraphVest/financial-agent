/* =========================================================
   BriefMarket AI - Editorial Fintech Prototype (No JS)
   ========================================================= */

:root {
  --bg: #f4f7ff;
  --bg-soft: #edf3ff;
  --surface: #ffffff;
  --surface-alt: #f4f8ff;
  --text: #152033;
  --muted: #5c6b82;
  --line: #d2def4;
  --line-strong: #b8c8e8;
  --primary: #1f4ed8;
  --primary-soft: #e7efff;
  --accent: #18a0a6;
  --accent-soft: #e9fbfd;
  --good: #0f9a5d;
  --bad: #ce3f4f;
  --warn: #a36a00;
  --radius-lg: 24px;
  --radius-md: 18px;
  --radius-sm: 12px;
  --shadow-soft: 0 14px 32px rgba(22, 44, 90, 0.09);
}

* {
  box-sizing: border-box;
}

html,
body {
  margin: 0;
  padding: 0;
}

body {
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
  color: var(--text);
  line-height: 1.45;
  background:
    radial-gradient(circle at 8% -5%, #ffffff, transparent 35%),
    radial-gradient(circle at 88% 12%, rgba(137, 233, 245, 0.3), transparent 30%),
    radial-gradient(circle at 70% 68%, rgba(100, 136, 255, 0.18), transparent 26%),
    linear-gradient(120deg, rgba(31, 78, 216, 0.06), transparent 35%),
    repeating-linear-gradient(
      90deg,
      transparent 0,
      transparent 39px,
      rgba(133, 157, 198, 0.08) 40px,
      rgba(133, 157, 198, 0.08) 41px
    ),
    var(--bg);
}

a {
  color: inherit;
  text-decoration: none;
}

a:focus-visible,
button:focus-visible,
input:focus-visible,
label:focus-visible {
  outline: 3px solid var(--primary);
  outline-offset: 2px;
}

.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border: 0;
}

.site-header {
  display: grid;
  gap: 1rem;
  padding: clamp(1rem, 2vw, 1.6rem) clamp(1rem, 2.6vw, 2.8rem);
  border-bottom: 1px solid var(--line);
  background: linear-gradient(180deg, rgba(255, 255, 255, 0.8), rgba(245, 250, 255, 0.74));
  backdrop-filter: blur(4px);
}

.site-header__kicker {
  margin: 0;
  font-size: 0.75rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: var(--muted);
}

.site-header h1 {
  margin: 0.15rem 0 0;
  font-size: clamp(1.5rem, 2.7vw, 2rem);
  letter-spacing: -0.02em;
}

.site-header__brand p:last-child {
  margin: 0.2rem 0 0;
  color: var(--muted);
}

.site-nav {
  display: flex;
  flex-wrap: wrap;
  gap: 0.5rem;
  align-items: center;
}

.site-nav a {
  border: 1px solid var(--line);
  border-radius: 999px;
  padding: 0.4rem 0.85rem;
  font-weight: 600;
  color: #42567a;
  background: rgba(255, 255, 255, 0.7);
}

.site-nav a:hover {
  background: #fff;
  border-color: #a9c0ef;
  color: #1f3a6e;
}

.site-nav a[aria-current="page"] {
  color: #173c95;
  border-color: #9ab7f6;
  background: linear-gradient(130deg, #edf3ff, #e7fbff);
}

.publish-badge {
  justify-self: start;
  margin: 0;
  background: linear-gradient(120deg, #f7fbff, #e5f0ff);
  color: #1a3d9f;
  border: 1px solid #c8d7fb;
  border-radius: 999px;
  padding: 0.45rem 0.9rem;
  font-weight: 700;
  font-size: 0.9rem;
}

.layout {
  display: grid;
  gap: 1.2rem;
  padding: 1rem clamp(1rem, 2.6vw, 2.8rem) 2rem;
}

.ticker-search {
  margin: 0.9rem clamp(1rem, 2.6vw, 2.8rem) 0;
  background: linear-gradient(150deg, #ffffff, #eef7ff);
  border: 1px solid #c7d8f5;
  border-radius: 18px;
  box-shadow: 0 10px 24px rgba(22, 44, 90, 0.08);
  padding: 0.85rem;
}

.ticker-search input[type="search"] {
  width: 100%;
  border: 1px solid #bfd2f1;
  border-radius: 12px;
  padding: 0.7rem 0.82rem;
  background: #fff;
  color: var(--text);
  font-size: 0.96rem;
}

.ticker-search__chips {
  margin-top: 0.55rem;
  display: flex;
  flex-wrap: wrap;
  gap: 0.4rem;
  align-items: center;
  color: #4f6487;
  font-size: 0.82rem;
}

.ticker-chip {
  border: 1px solid #c7d7f4;
  border-radius: 999px;
  background: #f5f9ff;
  color: #24477e;
  font-weight: 700;
  padding: 0.12rem 0.48rem;
}

.page-main {
  padding: 1rem clamp(1rem, 2.6vw, 2.8rem) 2rem;
}

.page-hero {
  background: linear-gradient(145deg, #ffffff, #eef6ff 88%);
  border: 1px solid #c8d8f5;
  border-radius: 22px;
  box-shadow: var(--shadow-soft);
  padding: 1rem 1.1rem;
}

.page-hero__kicker {
  margin: 0;
  font-size: 0.76rem;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  color: #4b6188;
}

.page-hero h2 {
  margin: 0.35rem 0 0;
  font-size: clamp(1.35rem, 2vw, 1.8rem);
  letter-spacing: -0.01em;
}

.page-hero p {
  margin: 0.35rem 0 0;
  color: #516684;
  max-width: 72ch;
}

.simple-grid {
  margin-top: 0.8rem;
  display: grid;
  gap: 0.7rem;
  grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
}

.simple-card {
  background: linear-gradient(150deg, #ffffff, #f5faff);
  border: 1px solid #cedcf4;
  border-radius: 18px;
  box-shadow: 0 10px 24px rgba(22, 44, 90, 0.08);
  padding: 0.9rem;
}

.simple-card h3 {
  margin: 0;
  font-size: 1rem;
}

.simple-card p {
  margin: 0.4rem 0 0;
  color: #536884;
}

.simple-meta {
  font-weight: 700;
  color: #2f4a79;
}

.watchlist-board {
  margin-top: 0.8rem;
  display: grid;
  gap: 0.65rem;
  grid-template-columns: repeat(auto-fit, minmax(170px, 1fr));
}

.watch-item {
  background: linear-gradient(155deg, #ffffff, #f3f9ff);
  border: 1px solid #ccdaf2;
  border-radius: 18px;
  padding: 0.8rem;
  box-shadow: 0 8px 22px rgba(22, 44, 90, 0.08);
}

.watch-item h3,
.watch-item p {
  margin: 0;
}

.watch-item h3 {
  font-size: 1.05rem;
}

.watch-item p {
  margin-top: 0.32rem;
  color: #496083;
  font-size: 0.9rem;
}

.watch-item .pill {
  margin-top: 0.5rem;
  display: inline-block;
}

.feed-area {
  min-width: 0;
}

.onboarding {
  display: flex;
  gap: 1rem;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  background: linear-gradient(145deg, #ffffff 20%, #f0f7ff 85%);
  border: 1px solid #c6d7fb;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-soft);
  padding: 1rem;
}

.onboarding h2 {
  margin: 0;
  font-size: 1.16rem;
  letter-spacing: -0.01em;
}

.onboarding p {
  margin: 0.25rem 0 0;
  color: var(--muted);
}

.beginner-control label {
  cursor: pointer;
  border: 1px solid #aac4ff;
  color: #153a97;
  background: linear-gradient(140deg, #edf3ff, #dff0ff);
  border-radius: 999px;
  padding: 0.5rem 0.9rem;
  font-weight: 700;
  box-shadow: 0 6px 16px rgba(42, 85, 190, 0.16);
  transition: transform 140ms ease, box-shadow 140ms ease;
}

.beginner-control label:hover {
  transform: translateY(-1px);
  box-shadow: 0 10px 20px rgba(42, 85, 190, 0.2);
}

.beginner-panel {
  display: none;
  margin-top: 0.8rem;
  padding: 0.95rem 1rem;
  border: 1px solid #bcd3fb;
  background: linear-gradient(145deg, #f4f8ff, #ecfcff);
  border-radius: var(--radius-md);
}

#beginner-mode:checked ~ .beginner-panel {
  display: block;
}

.beginner-panel h3 {
  margin: 0;
  font-size: 1rem;
}

.beginner-panel p {
  margin: 0.45rem 0 0;
  color: #30425d;
}

.feed-controls {
  margin-top: 0.8rem;
  background: linear-gradient(160deg, #ffffff 10%, #f4f9ff 100%);
  border: 1px solid #c8d8f5;
  border-radius: var(--radius-lg);
  box-shadow: var(--shadow-soft);
  padding: 1rem;
}

.feed-controls input[type="search"] {
  width: 100%;
  border: 1px solid #c2d3f1;
  border-radius: 12px;
  padding: 0.7rem 0.85rem;
  font-size: 0.98rem;
  color: var(--text);
  background: #fff;
}

.chip-row {
  margin-top: 0.75rem;
  display: flex;
  flex-wrap: wrap;
  gap: 0.45rem;
}

.chip {
  border: 1px solid #cad8f3;
  background: #fdfefe;
  color: #33425c;
  border-radius: 999px;
  padding: 0.35rem 0.72rem;
  font-size: 0.82rem;
  font-weight: 600;
}

.chip:hover,
.chip--active {
  border-color: #a8c0f8;
  background: linear-gradient(120deg, #edf2ff, #e8fbff);
  color: #2048b0;
}

.view-toggle {
  margin-top: 0.8rem;
  display: inline-flex;
  border: 1px solid #c6d6f5;
  background: linear-gradient(120deg, #edf3ff, #eefaff);
  border-radius: 999px;
  padding: 0.2rem;
  gap: 0.25rem;
}

.view-toggle label {
  cursor: pointer;
  padding: 0.35rem 0.8rem;
  border-radius: 999px;
  font-size: 0.82rem;
  font-weight: 700;
  color: #3b4f72;
}

#view-cards:checked ~ label[for="view-cards"],
#view-compact:checked ~ label[for="view-compact"] {
  background: #fff;
  border: 1px solid var(--line);
  color: #11264f;
}

.edition-divider {
  margin-top: 0.9rem;
  display: flex;
  justify-content: space-between;
  align-items: end;
  border-bottom: 1px solid #cddaf2;
  padding: 0.2rem 0.1rem 0.45rem;
}

.edition-divider h2,
.edition-divider p {
  margin: 0;
}

.edition-divider h2 {
  font-size: 1.03rem;
}

.edition-divider p {
  font-size: 0.87rem;
  font-weight: 700;
  color: #43587d;
}

.edition-divider--yesterday {
  margin-top: 1.2rem;
}

.article-feed {
  margin-top: 0.75rem;
  display: grid;
  gap: 0.75rem;
}

.article {
  background: linear-gradient(160deg, #ffffff 0%, #f8fbff 100%);
  border: 1px solid #ccdaf3;
  border-radius: 20px;
  box-shadow: var(--shadow-soft);
  padding: 0.9rem 1rem;
  transition: border-color 180ms ease, transform 180ms ease, box-shadow 180ms ease;
}

.article:hover {
  border-color: #a8c1f4;
  transform: translateY(-3px);
  box-shadow: 0 16px 30px rgba(18, 37, 78, 0.14);
}

.article--hero {
  border-radius: 24px;
  padding: 1.15rem 1.2rem;
  background:
    radial-gradient(circle at 85% 12%, rgba(126, 239, 250, 0.28), transparent 34%),
    linear-gradient(145deg, #ffffff, #ecf5ff 64%);
  border-color: #b7ccfa;
}

.article--hero h3 {
  font-size: clamp(1.25rem, 2vw, 1.6rem);
}

.article__meta {
  margin: 0;
  font-size: 0.8rem;
  color: #496288;
  display: flex;
  flex-wrap: wrap;
  align-items: center;
  gap: 0.4rem;
}

.article__dot {
  color: #92a2bf;
}

.article__tag,
.article__sector {
  border: 1px solid #cfdbef;
  background: #f5f9ff;
  border-radius: 999px;
  padding: 0.12rem 0.5rem;
  font-weight: 700;
  color: #26406f;
}

.article__sector {
  color: #4a4d6d;
}

.article h3 {
  margin: 0.45rem 0 0;
  font-size: 1.06rem;
  line-height: 1.28;
  letter-spacing: -0.01em;
}

.article__summary {
  margin: 0.48rem 0 0;
  color: var(--muted);
}

.article__signals {
  margin: 0.6rem 0 0;
  display: flex;
  flex-wrap: wrap;
  gap: 0.45rem;
  align-items: center;
}

.signal,
.confidence {
  border-radius: 999px;
  padding: 0.22rem 0.62rem;
  font-size: 0.77rem;
  font-weight: 700;
}

.signal--bull {
  color: #0d7f4c;
  background: #e6f8ef;
  border: 1px solid #baecd2;
}

.signal--bear {
  color: #a5303f;
  background: #ffedf0;
  border: 1px solid #f8ccd4;
}

.signal--mixed {
  color: #815100;
  background: #fff6e4;
  border: 1px solid #ffe2a8;
}

.confidence {
  color: #153f9f;
  background: linear-gradient(125deg, #e7f0ff, #e2fbff);
  border: 1px solid #bdd2ff;
}

.expand-label {
  display: inline-block;
  margin-top: 0.62rem;
  cursor: pointer;
  font-size: 0.82rem;
  font-weight: 700;
  color: #234aac;
  background: #eef3ff;
  border: 1px solid #c8d7f4;
  border-radius: 999px;
  padding: 0.24rem 0.58rem;
}

.expand-label:hover {
  background: #e6efff;
}

.article__details {
  display: none;
  margin-top: 0.6rem;
  border-top: 1px solid #d2ddf1;
  padding-top: 0.6rem;
}

.article__details ul {
  margin: 0;
  padding-left: 1rem;
  color: #2e405e;
}

.article__details li + li {
  margin-top: 0.25rem;
}

.article__details p {
  margin: 0.5rem 0 0;
  color: #3a4e71;
  font-size: 0.9rem;
}

.sources span {
  display: inline-block;
  margin-right: 0.35rem;
  margin-top: 0.2rem;
  border: 1px solid #ccd9ef;
  border-radius: 999px;
  padding: 0.1rem 0.5rem;
  background: var(--surface-alt);
  font-size: 0.78rem;
}

#expand-1:checked ~ .article__details,
#expand-2:checked ~ .article__details,
#expand-3:checked ~ .article__details,
#expand-4:checked ~ .article__details,
#expand-5:checked ~ .article__details,
#expand-6:checked ~ .article__details,
#expand-7:checked ~ .article__details,
#expand-8:checked ~ .article__details,
#expand-9:checked ~ .article__details,
#expand-10:checked ~ .article__details,
#expand-11:checked ~ .article__details,
#expand-12:checked ~ .article__details,
#expand-13:checked ~ .article__details,
#expand-14:checked ~ .article__details,
#expand-15:checked ~ .article__details,
#expand-16:checked ~ .article__details,
#expand-17:checked ~ .article__details {
  display: block;
}

#view-compact:checked ~ .edition-divider + .article-feed .article,
#view-compact:checked ~ .edition-divider + .article-feed + .edition-divider + .article-feed .article {
  padding: 0.65rem 0.8rem;
  border-radius: 14px;
}

#view-compact:checked ~ .edition-divider + .article-feed .article__summary,
#view-compact:checked ~ .edition-divider + .article-feed + .edition-divider + .article-feed .article__summary,
#view-compact:checked ~ .edition-divider + .article-feed .expand-label,
#view-compact:checked ~ .edition-divider + .article-feed + .edition-divider + .article-feed .expand-label,
#view-compact:checked ~ .edition-divider + .article-feed .article__details,
#view-compact:checked ~ .edition-divider + .article-feed + .edition-divider + .article-feed .article__details {
  display: none;
}

.context {
  display: grid;
  gap: 0.75rem;
}

.context-card {
  background: linear-gradient(165deg, #ffffff, #f6faff);
  border: 1px solid #cddaf3;
  border-radius: 20px;
  box-shadow: var(--shadow-soft);
  padding: 0.9rem;
}

.context-card h2,
.context-card h3,
.context-card p {
  margin: 0;
}

.context-card p {
  margin-top: 0.35rem;
  color: var(--muted);
}

.watchlist,
.trend-list,
.sector-list {
  list-style: none;
  margin: 0.65rem 0 0;
  padding: 0;
}

.watchlist li {
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 0.35rem 0;
  border-bottom: 1px solid #ebf0f9;
  font-weight: 600;
}

.watchlist li:last-child {
  border-bottom: 0;
}

.pill {
  border-radius: 999px;
  padding: 0.14rem 0.48rem;
  font-size: 0.75rem;
  font-weight: 700;
}

.pill--up {
  color: #0b7c49;
  background: #e5f8ee;
}

.pill--down {
  color: #ac3242;
  background: #ffedf0;
}

.trend-list,
.sector-list {
  display: flex;
  flex-wrap: wrap;
  gap: 0.35rem;
}

.trend-list li,
.sector-list li {
  border: 1px solid #ccdbf3;
  border-radius: 999px;
  padding: 0.15rem 0.5rem;
  font-size: 0.78rem;
  color: #374965;
  background: var(--surface-alt);
}

.quick-start {
  margin-top: 0.8rem;
  display: grid;
  gap: 0.6rem;
  grid-template-columns: repeat(auto-fit, minmax(190px, 1fr));
}

.quick-start__item {
  background: linear-gradient(140deg, #ffffff, #f3f9ff);
  border: 1px solid #cfdcf4;
  border-radius: 18px;
  padding: 0.8rem;
  box-shadow: 0 8px 20px rgba(32, 64, 126, 0.08);
}

.quick-start__item h3 {
  margin: 0;
  font-size: 0.92rem;
  letter-spacing: -0.01em;
}

.quick-start__item p {
  margin: 0.35rem 0 0;
  font-size: 0.86rem;
  color: #4b6188;
}

.confidence-mini {
  display: inline-block;
  border-radius: 999px;
  border: 1px solid #bdd2ff;
  background: linear-gradient(125deg, #e7f0ff, #e2fbff);
  color: #1644a7;
  font-weight: 700;
  padding: 0.08rem 0.4rem;
}

.context-subhead {
  margin-top: 0.65rem;
}

.disclaimer {
  font-weight: 700;
  color: #314260;
}

.site-footer {
  display: flex;
  flex-wrap: wrap;
  justify-content: space-between;
  align-items: center;
  gap: 0.75rem;
  border-top: 1px solid var(--line);
  margin-top: 1rem;
  padding: 1rem clamp(1rem, 2.6vw, 2.8rem) 1.6rem;
  color: #4c607f;
}

.site-footer p {
  margin: 0;
  font-weight: 700;
}

.site-footer nav {
  display: flex;
  gap: 0.7rem;
  flex-wrap: wrap;
}

.site-footer a {
  border-radius: 999px;
  border: 1px solid transparent;
  padding: 0.2rem 0.5rem;
}

.site-footer a:hover {
  border-color: var(--line);
  background: var(--surface);
}

@media (min-width: 1060px) {
  .site-header {
    grid-template-columns: minmax(280px, 1fr) auto auto;
    align-items: center;
  }

  .publish-badge {
    justify-self: end;
  }

  .layout {
    grid-template-columns: minmax(0, 1fr) 320px;
    align-items: start;
  }

  .context {
    position: sticky;
    top: 1rem;
  }
}

@media (max-width: 760px) {
  .onboarding {
    padding: 0.85rem;
  }

  .feed-controls {
    padding: 0.85rem;
  }

  .article {
    padding: 0.8rem;
  }

  .article h3 {
    font-size: 1rem;
  }

  .publish-badge {
    font-size: 0.82rem;
  }

  .quick-start__item {
    padding: 0.72rem;
  }

  .page-hero,
  .simple-card,
  .watch-item {
    border-radius: 16px;
  }
}

/* =========================================================
   NEW: Narrative Badge (in article meta row)
   ========================================================= */

.narrative-badge {
  border-radius: 999px;
  padding: 0.14rem 0.52rem;
  font-size: 0.72rem;
  font-weight: 700;
  letter-spacing: 0.02em;
}

.narrative-badge--strengthening {
  color: #0d7f4c;
  background: #e6f8ef;
  border: 1px solid #baecd2;
}

.narrative-badge--weakening {
  color: #a5303f;
  background: #ffedf0;
  border: 1px solid #f8ccd4;
}

.narrative-badge--reversal {
  color: #815100;
  background: #fff6e4;
  border: 1px solid #ffe2a8;
}

.narrative-badge--fresh {
  color: #153f9f;
  background: linear-gradient(125deg, #e7f0ff, #e2fbff);
  border: 1px solid #bdd2ff;
}

/* =========================================================
   NEW: Confidence Breakdown Panel
   ========================================================= */

.confidence[data-toggle] {
  cursor: pointer;
  transition: background 140ms ease, box-shadow 140ms ease;
}

.confidence[data-toggle]:hover {
  background: linear-gradient(125deg, #dce8ff, #d6f6ff);
  box-shadow: 0 2px 8px rgba(31, 78, 216, 0.15);
}

.confidence-breakdown {
  max-height: 0;
  overflow: hidden;
  transition: max-height 320ms ease, opacity 320ms ease, margin 320ms ease;
  opacity: 0;
  margin-top: 0;
  border-left: 3px solid var(--primary);
  padding: 0 0.9rem;
  background: linear-gradient(160deg, #f6f9ff, #eef8ff);
  border-radius: 0 var(--radius-sm) var(--radius-sm) 0;
}

.confidence-breakdown.is-open {
  max-height: 400px;
  opacity: 1;
  margin-top: 0.6rem;
  padding: 0.7rem 0.9rem;
}

.confidence-breakdown h4 {
  margin: 0 0 0.4rem;
  font-size: 0.82rem;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--primary);
}

.confidence-breakdown ul {
  margin: 0;
  padding: 0;
  list-style: none;
}

.confidence-breakdown li {
  padding: 0.18rem 0;
  font-size: 0.85rem;
  color: #2e405e;
}

.confidence-breakdown li + li {
  margin-top: 0.1rem;
}

.driver-pos::before {
  content: "+";
  display: inline-block;
  width: 1.1em;
  font-weight: 700;
  color: var(--good);
}

.driver-neg::before {
  content: "â€“";
  display: inline-block;
  width: 1.1em;
  font-weight: 700;
  color: var(--bad);
}

/* =========================================================
   NEW: Signal Flip Conditions
   ========================================================= */

.signal-flip {
  margin-top: 0.6rem;
  padding: 0.6rem 0.8rem;
  background: linear-gradient(160deg, #fffcf4, #fff8e8);
  border: 1px solid #f0dfb0;
  border-radius: var(--radius-sm);
}

.signal-flip h4 {
  margin: 0;
  font-size: 0.78rem;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: var(--warn);
}

.signal-flip p.signal-flip__sub {
  margin: 0.1rem 0 0.35rem;
  font-size: 0.76rem;
  color: #7a6330;
}

.signal-flip ul {
  margin: 0;
  padding-left: 1rem;
}

.signal-flip li {
  font-size: 0.84rem;
  color: #4e3f1a;
}

.signal-flip li + li {
  margin-top: 0.2rem;
}

/* =========================================================
   NEW: Stock Context Snapshot
   ========================================================= */

.stock-context-toggle,
.narrative-toggle {
  display: inline-block;
  margin-top: 0.45rem;
  margin-right: 0.35rem;
  cursor: pointer;
  font-size: 0.78rem;
  font-weight: 700;
  color: #234aac;
  background: #eef3ff;
  border: 1px solid #c8d7f4;
  border-radius: 999px;
  padding: 0.22rem 0.56rem;
  transition: background 140ms ease;
}

.stock-context-toggle:hover,
.narrative-toggle:hover {
  background: #e2ebff;
}

.stock-context-panel,
.narrative-panel {
  max-height: 0;
  overflow: hidden;
  transition: max-height 320ms ease, opacity 320ms ease, margin 320ms ease, padding 320ms ease;
  opacity: 0;
  margin-top: 0;
  padding: 0 0.8rem;
}

.stock-context-panel.is-open,
.narrative-panel.is-open {
  max-height: 400px;
  opacity: 1;
  margin-top: 0.5rem;
  padding: 0.65rem 0.8rem;
}

.stock-context-panel {
  background: linear-gradient(160deg, #f4f9ff, #edf7ff);
  border: 1px solid #c8daf5;
  border-radius: var(--radius-sm);
}

.stock-context-grid {
  display: grid;
  grid-template-columns: auto 1fr;
  gap: 0.25rem 0.7rem;
  font-size: 0.84rem;
}

.stock-context-grid dt {
  font-weight: 700;
  color: #374965;
}

.stock-context-grid dd {
  margin: 0;
  color: #2e405e;
}

/* =========================================================
   NEW: Narrative Timeline
   ========================================================= */

.narrative-panel {
  background: linear-gradient(160deg, #f8f5ff, #f0f0ff);
  border: 1px solid #d0c8f0;
  border-radius: var(--radius-sm);
}

.narrative-panel h4 {
  margin: 0 0 0.35rem;
  font-size: 0.82rem;
  text-transform: uppercase;
  letter-spacing: 0.06em;
  color: #5b3eac;
}

.narrative-entries {
  margin: 0;
  padding: 0;
  list-style: none;
  border-left: 2px solid #c4b9ec;
  padding-left: 0.8rem;
}

.narrative-entries li {
  position: relative;
  padding: 0.15rem 0;
  font-size: 0.84rem;
  color: #3e3463;
}

.narrative-entries li::before {
  content: "";
  position: absolute;
  left: -0.96rem;
  top: 0.5em;
  width: 7px;
  height: 7px;
  border-radius: 50%;
  background: #8a72d6;
}

.narrative-entries li + li {
  margin-top: 0.15rem;
}

/* =========================================================
   NEW: "Explain Like I'm 15" Toggle
   ========================================================= */

.eli15-control {
  display: inline-flex;
  align-items: center;
  gap: 0.4rem;
  margin-left: 0.6rem;
}

.eli15-control label {
  cursor: pointer;
  border: 1px solid #c0b8e8;
  color: #4b2ea7;
  background: linear-gradient(140deg, #f2eeff, #e8e2ff);
  border-radius: 999px;
  padding: 0.38rem 0.72rem;
  font-weight: 700;
  font-size: 0.82rem;
  box-shadow: 0 4px 12px rgba(90, 60, 180, 0.12);
  transition: transform 140ms ease, box-shadow 140ms ease;
}

.eli15-control label:hover {
  transform: translateY(-1px);
  box-shadow: 0 8px 18px rgba(90, 60, 180, 0.18);
}

.eli15--active {
  background: linear-gradient(125deg, #f0ebff, #e6f8ff);
  border-radius: 4px;
  padding: 0.04rem 0.18rem;
  color: #3a1d8e;
}

/* =========================================================
   NEW: Filter Groups
   ========================================================= */

.filter-group {
  margin-top: 0.65rem;
}

.filter-group__label {
  display: block;
  font-size: 0.72rem;
  font-weight: 700;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  color: var(--muted);
  margin-bottom: 0.3rem;
}

/* =========================================================
   NEW: Hidden article (filter)
   ========================================================= */

.article--hidden {
  display: none !important;
}
